{"version":3,"sources":["../../../src/coooders/common/tool.js"],"names":["environment","os","process","cwd","indexOf","splitChar","prop","target","k","v","push","link","url","desc","des","isValid","data","replace","undefined","length","getValue","defaultData","pris","key","obj","priv","merge","format","s","o","__","funrep","sb","StringBuilder","showException","name","e","message","stack","fileName","lineNumber","description","console","log","showEx","tryF","func","errcall","Proxy","tryHandle","tryC","tryC2","err","watch","restart","start","Date","diff","isArray","once","timeout","timeoutID","clearTimeout","nextTick","setTimeout","whileC","exp","isSequ","disorderlWhile","sequfunc","disorderfunc","each","disorderlEach","sequEach","disorderEach","forC","disorderlFor","sequFor","disorderFor","finalC","funs","finalF","pop","callback2","then","next","tnext","i","goerr","Error","rollbacks","g","go","v2","unshift","r","rollback","catch","e2","args","re","rj","call","_this","paras","slice","concat","callback","that","args2","random","parseInt","getTime","index","hash","str","caseSensitive","toString","toLowerCase","ch","charCodeAt","hash2","ret","update","digest","substr","formatPrice","number","decimals","dec_point","thousands_sep","n","isFinite","prec","Math","abs","sep","dec","toFixedFix","pow","round","split","Array","join","encHtml","html","match","encmatch","encreg","encother","a","encodeURIComponent","decHtml","decodeURIComponent","toJsonString","json","JSON","parse","toTJson","quotation","res","k2","getTJsonValue","getType","x","t","c","Object","prototype","apply","substring","constructor","classname","argu","_","i2","inherits","parent","_temp","F","isF","__proto__","base","create2","type","create","eval","md5","text","xhash","ecode","ocode","xhmac","xsign","keycode","sign","xverify","verify","xcrypt","cipher","final","xdcrypt","xcrypt_a1e","setAutoPadding","xdcrypt_a1e","include","path","paths","unclude","startWith","mainModule","filename","dir","eq","trim","require","endWith","e3","applyCAE","S","settings","exsettings","getSettings","extendSettings","exSettings","clearSettings","registCommand","comms","callCommand","caller","hasCommand","cleanCommand","registEvent","isTop","fun","events","top","ecall","time","callEvent","add","hasEvent","cleanEvent","encodeEmoji","convert2Base64","p1","String","fromCharCode","decodeEmoji","convert2Binary","ret2","forEach","xml","config","xmloptions","j2x","j2xParser","toXml","toJson","deCDATA","cdataTagName","GUID","pri","reg","lreg","rreg","word","append","fmt","insert","max","context","proxy","arguments","emptyfunc","val","isStop","all","disorderlfunc","count","limit","error","disorderffunc","disorderwfunc","now","p","clone","source","aim","hasmergeIndex","i3","mergeIndex","moveIndex","splice","Buffer","buffer","attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","trimValues","cdataPositionChar","localeRange","parseTrueNumberOnly","attrValueProcessor","decode","isAttributeValue","tagValueProcessor","DIC","interval","d","A","X","objDate2","t2","getFullYear","floor","getMonth","D","sub","getDate","getHours","getMinutes","getSeconds","getMilliseconds","week","test","RegExp","$1","getDay","endsWith","startsWith","isOri","chr","toNumber","mul","div"],"mappings":"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","file":"tool.js","sourcesContent":["'use strict';\nimport util from 'util';\nimport {\n    parse,\n    resolve,\n    normalize\n} from 'path';\nimport {\n    createHash,\n    createHmac,\n    createSign,\n    createVerify,\n    createCipheriv,\n    createCipher,\n    createDecipheriv,\n    createDecipher\n} from 'crypto';\nimport v4 from 'uuid/v4';\nimport Decimal from 'decimal.js';\nimport parser from 'fast-xml-parser';\nimport he from 'he';\n/*\n减少语句路径\n少用pop,push 改为i++--操作和[length]=new\n频繁new的对象改为inherit2方法 尽管inherit2方法无法私有对象\n多用三元？少用if\n多用空方法 少用if\n除非必须 少用delete\n使用 || 代替 getValue 或者3元\n使用for if(i++>1) 判断是否为空\n使用substr lastIndexOf 代替split\n尽量使用原生方法（native）代替自己的方法\n*/\nexport const environment = {\n    os: (process.cwd().indexOf('\\\\') >= 0) ? \"windows\" : \"linux/unix\",\n    splitChar: (process.cwd().indexOf('\\\\') >= 0) ? \"\\\\\" : \"/\"\n};\n/**\n * 采用代理模式给类和类内方法添加属性\n * @param(调用时的原方法对象,键值,键值上的一个新值)\n * @returns decorator\n */\nexport const prop = (target, k, v) => {\n    target[k] = target[k] || [];\n    target[k].push(v);\n};\n/**\n * 添加link属性用于连接方法需求\n * @param (link)\n */\nexport const link = url => {\n    return (target) => prop(target, 'link', url);\n};\n/**\n * 添加多个desc属性用于动态显示方法描述\n * @param (desc)\n */\nexport const desc = des => {\n    return (target) => prop(target, 'desc', des);\n};\n/**\n * 判断对象是否有效 含有 not in (null,undefined,'null','',\\s+,0,false)\n */\nexport const isValid = data => (!!data && (data.replace == undefined || (data.replace(/\\s/g, '').length > 0)));\n/**\n * 三元表达式，简化 多数情况可以用默认值或者 value || defaultValue 替换，但是当其为null时则不好判断\n */\nexport const getValue = (data, defaultData) => isValid(data) ? data : defaultData;\n/**\n * 私有方法，返回_,__命名的一个自身对象和一个私有对象。一般在类方法第一句使用\n * @param(this,__)\n * @return({this,private})\n */\nexport const pris = () => {\n    const key = Symbol('private');\n    return (obj, priv) => {\n        obj[key] = (priv ? merge(obj[key], priv) : obj[key]) || {};\n        return {\n            '_': obj,\n            '__': obj[key]\n        };\n    };\n};\n\n/**\n * 字符串格式化，使用<%k.v%>,{k.v}等等方式进行递进的属性替换，当字符串模板不可用时使用。\n */\nexport const format = function(s, o) {\n    if (!s || !o) {\n        return getValue(s, '');\n    }\n    if (s.indexOf('<%=') >= 0) return __.funrep(s, o, /<%=[^(%>)]+%>/gi, /<%=/g, /%>/g);\n    if (s.indexOf('{') >= 0) return __.funrep(s, o, /\\{[^(})]+\\}/gi, /\\{/g, /\\}/g);\n    return s;\n};\n/**\n * 返回私有StringBuilder对象实例，含有\n */\nexport const sb = () => new __.StringBuilder();\nexport const showException = (name = '', e) => {\n    if (isValid(e)) {\n        name += (\"\\r\\nmessage:\" + getValue(e.message, e) + (e.stack ? (\"\\r\\nstack:\" + e.stack + (e.fileName ? (\"\\r\\nfile:\" + e.fileName) : '') + (e.lineNumber ? (\"\\r\\nlineNumber:\" + e.lineNumber) : '')) : (e.description ? (\"\\r\\ndescription:\" + e.description) : \"\")));\n        console.log(name);\n    }\n};\nexport const showEx = showException;\nexport const tryF = (func, errcall) => new Proxy(func, __.tryHandle(errcall));\nexport const tryC = (func, errcall) => tryF(func, errcall)();\nexport const tryC2 = (err, func, errcall) => err ? (errcall || __.showEx)(e) : tryC(func, errcall);\nexport const watch = (restart) => {\n    if (!__.start || restart) {\n        __.start = new Date();\n        console.log('VESH.watch开始' + __.start);\n    } else {\n        console.log('VESH.watch 持续了:' + __.start.diff('ms', new Date()));\n    }\n}\nexport const isArray = util.isArray;\nexport const once = (func, timeout) => {\n    timeout = timeout || 1;\n    if (func.timeoutID) {\n        clearTimeout(func.timeoutID);\n    }\n    if (timeout == 1)\n        process.nextTick(() => tryC(func));\n    else\n        func.timeoutID = setTimeout(() => tryC(func), timeout);\n};\n//exp的非链式操作与链式操作，非链式不保证执行顺序，链式保证执行顺序，对象的随机并发操作与顺序执行，数组的map随机并发操作与顺序执行\n//使用once满足非promise截止的请求，循环全部是promise截止的r\n//根据执行的源头不同分为 whileC(链式、非链式，promise),forC(链式、非链式，promise),each(链式、非链式，promise),next(链式 promise),finalC(非链式 promise) 不同种类 根据链式与非链式，\n//保证异步的同步执行\n//保证当直接返回true或者call(null,true)时中断循环\nexport const whileC = (exp, func, isSequ = false) => isSequ ? (isSequ > 1 ? __.disorderlWhile(exp, func, isSequ) : __.sequfunc(exp, func, exp())) : __.disorderfunc(exp, func, exp());\nexport const each = (data, func, isSequ = false) => isSequ ? (isSequ > 1 ? __.disorderlEach(data, func, isSequ) : __.sequEach(data, func)) : __.disorderEach(data, func);\nexport const forC = (obj, func, isSequ = false) => isSequ ? (isSequ > 1 ? __.disorderlFor(obj, func, isSequ) : __.sequFor(obj, func)) : __.disorderFor(obj, func);\nexport const finalC = (...funs) => {\n    const data = {},\n        finalF = funs.pop();\n    return each(funs, v => callback2(v, null, data)).then(() => callback2(finalF, null, data));\n};\nexport const next = (...funs) => {\n    const data = {};\n    return each(funs, v => callback2(v, null, data), true);\n};\n\n/**\n * 用于链式处理事务 参数为成对定义的正向和回滚方法{go:func,rollback:func} 也可简写为 {g:func,r:func}\n */\nexport const tnext = (...funs) => {\n    let i = 1;\n    const data = {},\n        goerr = () => { throw new Error('请在第' + i + '个对象定义g或者go方法') },\n        rollbacks = [];\n    return each(funs, (v) => callback2(v.g || v.go || goerr, v, data).then((v2) => {\n        rollbacks.unshift(v.r || v.rollback || (function() {\n            throw new Error('请在第' + i + '个对象定义r或者rollback方法');\n        })());\n        i++;\n        return v2;\n    }).catch(e2 => {\n        if (typeof(e2) === 'string' || typeof(e2) === 'boolean')\n            rollbacks.unshift(v.r || v.rollback || (function() {\n                throw new Error('请在第' + i + '个对象定义r或者rollback方法');\n            })());\n        throw typeof(e2) === 'string' ? new Error(e2) : e2;\n    }), true).catch(e => next(...rollbacks).then(() => { throw e; }));\n};\n/**\n * 异步改同步请求\n * 兼容直接返回值，返回一个Promise或者返回undefined 最后一个参数调用call(e,data) 三种情况\n * @param {*} args \n */\nexport const callback2 = function(...args) {\n    return new Promise(async(re, rj) => {\n        try {\n            const call = (e, data) => e ? rj(e) : re(data);\n            const func = args[0];\n            const _this = args[1] || null;\n            const paras = args.slice(2).concat([call]);\n            let data = Reflect.apply(func, _this, paras); //this 不对 Reflect.apply(func, null, paras);\n            if (data && data.then) data = await data || false;\n            switch (typeof(data)) {\n                case 'function':\n                    data(call);\n                case 'undefined':\n                    break;\n                default:\n                    call(null, data);\n                    break;\n            }\n        } catch (e) {\n            rj(e);\n        }\n    });\n};\n/**\n * 仅适用最后一个参数为call的情况\n * @param {*} args \n */\nexport const callback = function(...args) {\n    const func = args[0];\n    args[0] = function(...args2) {\n        const that = this;\n        Reflect.apply(func, that, args2);\n    };\n    return callback2(...args);\n};\nexport const random = () => parseInt('' + (new Date()).getTime() + (__.index++));\n/**\n * 获取字符串的哈希值\n * @param {String} str\n * @param {Boolean} caseSensitive\n * @return {Number} hashCode\n */\nexport const hash = (str, caseSensitive = false) => {\n    str = str.toString();\n    if (!caseSensitive) {\n        str = str.toLowerCase();\n    }\n    // 1315423911=b'1001110011001111100011010100111'\n    let hash = 1315423911,\n        i, ch;\n    for (i = str.length - 1; i >= 0; i--) {\n        ch = str.charCodeAt(i);\n        hash ^= ((hash << 5) + ch + (hash >> 2));\n    }\n    return (hash & 0x7FFFFFFF);\n};\n/**\n * 获取字符串的sha1 base64 哈希值\n * @param {String} str\n * @param {Boolean} caseSensitive\n * @return {Number} hashCode\n */\nexport const hash2 = (str) => {\n    let ret = createHash('sha256').update(str).digest('base64');\n    return ret.substr(0, 2) + ret.substr(11, 1) + ret.substr(3, 10) + ret.substr(2, 1) + ret.substr(12);\n};\n\nexport const formatPrice = function(number, decimals, dec_point, thousands_sep) {\n    number = (number + '').replace(/[^0-9+-Ee.]/g, '');\n    let n = !isFinite(+number) ? 0 : +number,\n        prec = !isFinite(+decimals) ? 2 : Math.abs(decimals),\n        sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,\n        dec = (typeof dec_point === 'undefined') ? '.' : dec_point,\n        s = '',\n        toFixedFix = function(n, prec) {\n            const k = Math.pow(10, prec);\n            return '' + Math.round(n * k) / k;\n        };\n    // Fix for IE parseFloat(0.55).toFixed(0) = 0;\n    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');\n    if (s[0].length > 3) {\n        s[0] = s[0].replace(/B(?=(?:fd{3})+(?!d))/g, sep);\n    }\n    if ((s[1] || '').length < prec) {\n        s[1] = s[1] || '';\n        s[1] += new Array(prec - s[1].length + 1).join('0');\n    }\n    return s.join(dec);\n};\n/**\n * 只更新标点符号不更新全半角文字的encode\n * @param {String} html\n * @return {String} encodeURIComponent之后的字段\n */\nexport const encHtml = (html = '') => ((html || '').replace(/[\\r\\n]+/g, '>v>j>').replace(/\\s+/g, ' ').replace(/>v>j>/g, '\\r\\n').match(__.encmatch) || []).join('').replace(__.encreg, a => __.encother[a] || encodeURIComponent(a));\nexport const decHtml = (html = '') => decodeURIComponent(html);\nexport const toJsonString = JSON.stringify;\nexport const json = JSON.parse;\n/**\n * \n * @param {*} 二维数组 \n * @param {*} 是否需要引号 \n */\nexport const toTJson = (data = [], quotation = true) => {\n    if (!isArray(data)) data = [data];\n    const res = [];\n    if (data[0] && isArray(data[0])) {\n        for (const i in data) {\n            res[i] = toTJson(data[i]);\n        }\n    } else {\n        //找到第一个不是数组的实例对象进行处理\n        res[0] = [];\n        for (const k in data[0]) {\n            res[0].push(quotation ? \"\\\"\" + k + \"\\\"\" : '' + k);\n        }\n        for (const v in data) {\n            const obj = [];\n            for (const k2 in data[v])\n                obj.push(__.getTJsonValue(data[v][k2], quotation));\n            res.push(obj);\n        }\n    }\n    return res;\n};\nexport const getType = (x = null) => {\n    if (x == null) {\n        return \"null\";\n    }\n    const t = typeof x;\n    if (t != \"object\" && t != 'Object') {\n        return t;\n    }\n    if (isArray(x)) {\n        return 'Array';\n    }\n    let c = Object.prototype.toString.apply(x);\n    c = c.substring(8, c.length - 1);\n    if (c != \"Object\") {\n        return c;\n    }\n    if (x.constructor == Object) {\n        return c;\n    }\n    if (x.prototype && \"classname\" in x.prototype.constructor &&\n        typeof x.prototype.constructor.classname == \"string\") {\n        return x.constructor.prototype.classname;\n    }\n    return \"ukObject\";\n};\nexport const merge = (...argu) => {\n    if (argu.length < 2) {\n        return argu[0] ? argu[0] : {}\n    };\n    if (argu.length > 0 && true === argu[argu.length - 1]) {\n        let _ = argu[0];\n        for (let i2 = 1; i2 < argu.length; i2++)\n            _ = __.merge(_, argu[i2]);\n        return _;\n    } else {\n        let _ = {};\n        for (let i2 = 0; i2 < argu.length; i2++)\n            _ = __.merge(_, argu[i2]);\n        return _;\n    }\n}\nexport const inherits = function(parent, args) {\n    //绕过了parent的构造函数，重新链接原型链条\n    const _temp = (function() {\n        const F = function() {};\n        util.inherits(F, parent);\n        //F.prototype = parent.prototype;\n        F.prototype.isF = true;\n        return new F();\n    })();\n    _temp.constructor = parent;\n    if (!this.prototype) {\n        //这里确认是实例\n        //确定是打断了原型链 使得this的原型为Object\t\t\n        parent.apply(this, args);\n        //从新接驳原型链 使得原型链上的prototype都设置到最早的类的prototype上了\n        if (this.__proto__ && !this.__proto__.isF) {\n            util.inherits(this.__proto__.constructor, _temp.__proto__.constructor);\n            //this.__proto__.constructor.prototype = _temp.__proto__.constructor.prototype;\n        }\n        //son.prototype = _temp; //这里可以分层 但是会使得prototype实例变了又变 废弃\n        this.__proto__ = _temp;\n        //父类方法只能找到静态方法\n        this.base = this.__proto__.constructor.prototype;\n    } else {\n        console.log('如果失败，需要配合子类构造函数中使用parent.apply(this,[***])');\n        //这里确认是类定义\n        this.prototype = _temp;\n    }\n};\nexport const create2 = function(type, args) {\n    if (typeof(type) == 'function') {\n        return new type(...args);\n    } else showException('请传入类定义');\n};\nexport const create = function(type, args) {\n    if (typeof(type) == 'function') {\n        args = Array.isArray(args) ? args : [args];\n        let ret = '(new type(';\n        if (Array.isArray(args)) {\n            for (const i in args) {\n                ret += 'args[' + i + '],'\n            }\n            if (args.length > 0) {\n                ret = ret.substr(0, ret.length - 1);\n            }\n        }\n        return eval(ret + '))');\n    } else showException('请传入类定义');\n};\n/**\n * 分别尝试全路径.js/全路径.njs/全路径加载类 并对处理结果进行缓存 会导致热更新失败错误!\n * @param {text} md5源串\n */\nexport const md5 = function(text) {\n    return createHash('md5').update(text, 'utf-8').digest('hex');\n};\n\n/**\n * 扩展hash\n * https://www.jb51.net/article/50668.htm\n * @param {string} text 原文\n * @param {string} type 算法 譬如 md5\n * @param {string} ecode 入栈 譬如 utf8\n * @param {string} ocode 出栈 譬如 hex\n */\nexport const xhash = function(text, type = 'md5', ecode = 'utf8', ocode = 'hex') {\n    return createHash(type).update(text, ecode).digest(ocode);\n}\n\n/**\n * 带秘钥hash\n * https://www.jb51.net/article/50668.htm\n * @param {string} text 原文\n * @param {string} key 秘钥 譬如 111\n * @param {string} type 算法 譬如 md5\n * @param {string} ecode 入栈 譬如 utf8\n * @param {string} ocode 出栈 譬如 hex\n */\nexport const xhmac = function(text, key, type = 'sha256', ecode = 'utf8', ocode = 'base64') {\n    return createHmac(type, key).update(text, ecode).digest(ocode);\n}\n\n/**\n * 带秘钥生成签名\n * https://www.jb51.net/article/50668.htm\n * openssl list-public-key-algorithms 看所有的签名算法\n * @param {*} text \n * @param {*} key \n * @param {*} type \n * @param {*} keycode \n */\nexport const xsign = function(text, key, type = \"RSA-SHA256\", keycode = \"hex\") {\n    const sign = createSign(type);\n    sign.update(text);\n    return sign.sign(key, keycode);\n}\n\n/**\n * 带秘钥验证签名\n * https://www.jb51.net/article/50668.htm\n * openssl list-public-key-algorithms 看所有的签名算法\n * @param {*} text \n * @param {*} key \n * @param {*} type \n * @param {*} keycode \n */\nexport const xverify = function(text, key, type = \"RSA-SHA256\", keycode = \"hex\") {\n    const sign = createVerify(type);\n    sign.update(text);\n    return sign.verify(key, keycode);\n}\n\n/**\n * 加密\n * https://www.jb51.net/article/50668.htm\n * https://blog.csdn.net/shmnh/article/details/48254001?utm_source=blogxgwz0\n * @param {string} text 原文\n * @param {string} key 秘钥 譬如 111\n * @param {string} type 算法 譬如 md5\n * @param {string} ecode 入栈 譬如 utf8\n * @param {string} ocode 出栈 譬如 base64\n */\nexport const xcrypt = function(text, key, type = 'aes-256-cbc', ecode = 'utf8', ocode = 'base64') {\n    var cipher = createCipher(type, key);\n    return cipher.update(text, ecode, ocode) + cipher.final(ocode);\n}\n\n/**\n * 解密\n * https://www.jb51.net/article/50668.htm\n * https://blog.csdn.net/shmnh/article/details/48254001?utm_source=blogxgwz0\n * @param {string} text 原文\n * @param {string} key 秘钥 譬如 111\n * @param {string} type 算法 譬如 md5\n * @param {string} ecode 入栈 譬如 base64\n * @param {string} ocode 出栈 譬如 utf8\n */\nexport const xdcrypt = function(text, key, type = 'aes-256-cbc', ecode = 'base64', ocode = 'utf8') {\n    var cipher = createDecipher(type, key);\n    return cipher.update(text, ecode, ocode) + cipher.final(ocode);\n}\n\n/**\n * 加密\n * https://www.jb51.net/article/50668.htm\n * https://blog.csdn.net/shmnh/article/details/48254001?utm_source=blogxgwz0\n * @param {string} text 原文\n * @param {string} key 秘钥 譬如 111\n * @param {string} ecode 入栈 譬如 utf8\n * @param {string} ocode 出栈 譬如 base64\n */\nexport const xcrypt_a1e = function(text, key, ecode = 'utf8', ocode = 'base64') {\n    var cipher = createCipheriv('aes-128-ecb', key, '');\n    cipher.setAutoPadding(true);\n    return cipher.update(text, ecode, ocode) + cipher.final(ocode);\n}\n\n/**\n * 解密\n * https://www.jb51.net/article/50668.htm\n * https://blog.csdn.net/shmnh/article/details/48254001?utm_source=blogxgwz0\n * @param {string} text 原文\n * @param {string} key 秘钥 譬如 111\n * @param {string} type 算法 譬如 md5\n * @param {string} ecode 入栈 譬如 base64\n * @param {string} ocode 出栈 譬如 utf8\n */\nexport const xdcrypt_a1e = function(text, key, ecode = 'base64', ocode = 'utf8') {\n    var cipher = createDecipheriv('aes-128-ecb', key, '');\n    cipher.setAutoPadding(true);\n    return cipher.update(text, ecode, ocode) + cipher.final(ocode);\n}\n\n/**\n * 分别尝试全路径.js/全路径.njs/全路径加载类 并对处理结果进行缓存 会导致热更新失败错误!\n * @param {文件上级路径} path \n * @param {类名} base \n */\nexport const include = function(path, base = null) {\n    const paths = `${path}|${base}`;\n    return __.include[paths] || (function() {\n        if (__.unclude[paths]) throw new Error(`加载${paths}失败!`);\n        __.include[paths] = (function() {\n            try {\n                if (path.startWith('\\\\') || path.startWith('/')) {\n                    base = (base ? format(base) : parse(resolve(normalize(process.mainModule.filename))).dir);\n                    if ('windows'.eq(environment.os || '')) {\n                        //windows\n                        base = base.replace(/\\//g, '\\\\');\n                        path = path.trim('/').trim('\\\\').replace(/\\//g, '\\\\');\n                    } else {\n                        //linux\n                        base = base.replace(/\\\\\\\\/g, '/');\n                        path = path.trim('\\\\').trim('/').replace(/\\\\\\\\/g, '/');\n                    }\n                    try {\n                        try {\n                            return require(`${base}${environment.splitChar}${path}.njs`);\n                        } catch (e2) {\n                            if (path.endWith('action') && e2.message.indexOf('action.njs') < 0)\n                                console.log(`${base}${environment.splitChar}${path}.njs 加载失败!`, e2.stack);\n                            return require(`${base}${environment.splitChar}${path}.js`);\n                        }\n                    } catch (e3) {\n                        return require(path);\n                    }\n                } else return require(path);\n            } catch (e) {\n                //console.log(e.stack);\n                __.unclude[paths] = true;\n                throw new Error(`加载${paths}失败!!${e.stack}`);\n            }\n        })();\n        return __.include[paths];\n    })();\n};\nexport const applyCAE = function(S) {\n    //功能出现严重问题 无法在ES6下使用\n    S[__.settings] = {};\n    S[__.exsettings] = {};\n    //获取不存在就配置\n    S.getSettings = function(key, data) {\n        if (!isValid(S[__.settings][key])) {\n            if (isValid(S[__.exsettings][key])) {\n                S[__.settings][key] = merge(getValue(data, {}), S[__.exsettings][key]);\n                delete S[__.exsettings][key];\n            } else\n                S[__.settings][key] = getValue(data, {});\n        }\n        return S[__.settings][key];\n    };\n    //扩展默认配置\n    S.extendSettings = function(key, data) {\n        if (isValid(S[__.settings][key])) {\n            S[__.settings][key] = merge(S[__.settings][key], data);\n        } else {\n            if (S.exSettings[key]) {\n                S[__.exsettings][key] = merge(S[__.exsettings][key], getValue(data, {}));\n            } else {\n                S[__.exsettings][key] = getValue(data, {});\n            }\n        }\n    };\n    S.clearSettings = function() {\n        S[__.settings] = {};\n    };\n    S.registCommand = function(name, func) {\n        const comms = S.getSettings('comms', []);\n        const data = comms[name];\n        if (isValid(data) && typeof(data) != 'function') {\n            func.apply(null, data);\n        }\n        comms[name] = func;\n    };\n    /*\n    V用于调用被调用页面注册的命令以处理异步命令调用，当命令尚未注册而已经被调用时，参数会先被缓存下来，然后当命令注册时，已知的参数再被调用。\n    --案例\n    S.callCommand('showXXList',[{id:1}])\n    */\n    S.callCommand = function(name, data) {\n        const caller = null;\n        const comms = S.getSettings('comms', []);\n        const func = comms[name];\n        data = isArray(data) ? data : [data];\n        if (isValid(func) && typeof(func) == 'function') {\n            once(function() {\n                func.apply(caller, data);\n            });\n        } else {\n            comms[name] = data;\n        }\n    };\n    /*\n    用来判断是否调用页面,当已经调用过(part)，返回true,否则返回false;\n    --案例\n    if (!S.hasCommand('editor.open')) S.part(\"/FileServer/layout/editor/editor.htm\");\n    */\n    S.hasCommand = function(name) {\n        const comms = S.getSettings('comms', []);\n        const func = comms[name];\n        return (isValid(func) && typeof(func) == 'function');\n    };\n\n    /*\n    仅限iframe方式调用时，先取消原页面添加的方法\n    //业务逻辑深度交叉，iframe落后的控件连接方式时使用\n    一定要在part前\n    --案例\n    S.cleanCommand('editor.open');\n    S.part(\"/FileServer/layout/editor/editor.htm\",null,\"iframe\",function(){});\n    */\n    S.cleanCommand = function(name) {\n        const comms = S.getSettings('comms', []);\n        delete comms[name];\n    };\n    /*\n    V用于被调用页面注册命令以处理异步命令调用,当命令尚未注册而已经被调用时，参数会先被缓存下来，然后当命令注册时，已知的参数再被调用。\n    并约定1分钟内 允许注册者多次被触发\n    --案例\n    S.registEvent('showXXList',getData),S.registEvent(['showXXList',''],getData)\n    */\n    S.registEvent = function(name, func, isTop) {\n        const fun = function(name, func, isTop) {\n            const events = S.getSettings('events', []);\n            let funs = events[name];\n            if (!isValid(funs)) {\n                funs = [];\n                events[name] = funs;\n            }\n            if (typeof(func) == 'function') {\n                if (isTop && !funs.top) {\n                    funs.top = func;\n                    funs.unshift(func);\n                } else {\n                    if (isTop && funs.top) {\n                        showException('S.registEvent:' + name + ' 事件已经有订阅者被置顶!');\n                    }\n                    funs.push(func);\n                }\n                let ecall = S.getSettings('eventcall', {});\n                ecall = ecall[name] ? ecall[name] : {};\n                if (ecall.time && ecall.time >= (new Date().getTime())) {\n                    once(function() {\n                        func.apply(ecall.caller, ecall.data);\n                    });\n                }\n            }\n        };\n        if (isArray(name)) {\n            each(name, function(v) {\n                fun(v, func, isTop);\n                return false;\n            }, true);\n        } else {\n            fun(name, func, isTop);\n        }\n    };\n    /*\n    V用于调用被调用页面注册的事件以处理异步命令调用，当命令尚未注册而已经被调用时，参数会先被缓存下来，然后当命令注册时，已知的参数再被调用。\n    并约定1分钟内 允许注册者多次被触发\n    --案例\n    S.callEvent('showXXList',[{id:1}])\n    */\n    S.callEvent = function(name, data) {\n        const caller = null;\n        const events = S.getSettings('events', []);\n        const funs = events[name];\n        data = isArray(data) ? data : [data];\n        if (isValid(funs) && isArray(funs)) {\n            each(funs, function(func) {\n                //报错不下火线\n                tryC(function() {\n                    func.apply(caller, data);\n                });\n            });\n        }\n        let ecall = S.getSettings('eventcall', {});\n        if (!ecall[name]) {\n            ecall[name] = {};\n        }\n        ecall = ecall[name];\n        ecall.time = new Date().add('n', 1).getTime();\n        ecall.data = data;\n        ecall.caller = caller;\n    };\n    /*\n    用来判断是否调用页面,当已经调用过(part)，返回true,否则返回false;\n    --案例\n    if (!S.hasEvent('editor.open')) S.part(\"/FileServer/layout/editor/editor.htm\");\n    */\n    S.hasEvent = function(name) {\n        const events = S.getSettings('events', []);\n        const funs = events[name];\n        if (isValid(funs) && isArray(funs)) {\n            return true;\n        }\n        return false;\n    };\n\n    /*\n    仅限iframe方式调用时，先取消原页面添加的方法\n    //业务逻辑深度交叉，iframe落后的控件连接方式时使用\n    一定要在part前\n    --案例\n    S.cleanEvent('editor.open');\n    S.part(\"/FileServer/layout/editor/editor.htm\",null,\"iframe\",function(){});\n    */\n    S.cleanEvent = function(name) {\n        const events = S.getSettings('events', []);\n        delete events[name];\n    };\n};\n\n/**\n * 转换Emoji为base64格式\n * @param {*} str \n */\nexport const encodeEmoji = function(str) {\n    return __.convert2Base64(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {\n        return String.fromCharCode('0x' + p1);\n    }));\n};\n\n/**\n * base64还原emoji\n * @param {*} str \n */\nexport const decodeEmoji = function(str) {\n    var ret;\n    try {\n        ret = __.convert2Binary(str).split('');\n        var ret2 = [];\n        ret.forEach(function(c) {\n            ret2.push('%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2));\n        });\n        return decodeURIComponent(ret2.join(''));\n    } catch (e) {\n        ret = decodeURIComponent(str);\n    }\n    return ret || str;\n};\n\n/**\n * 生成xml解析对象 toJson用于转换xml2Json toXml用于转换json2xml\n * @param {config} config \n *          譬如 attributeNamePrefix: \"@_\",\n            attrNodeName: \"attr\", //default is 'false'\n            textNodeName: \"#text\",\n            ignoreAttributes: true,\n            ignoreNameSpace: false,\n            allowBooleanAttributes: false,\n            parseNodeValue: true,\n            parseAttributeValue: false,\n            trimValues: true,\n            cdataTagName: \"__cdata\", //default is 'false'\n            cdataPositionChar: \"\\\\c\",\n            localeRange: \"\", //To support non english character in tag/attribute values.\n            parseTrueNumberOnly: false,\n            attrValueProcessor: a => he.decode(a, { isAttributeValue: true }), //default is a=>a\n            tagValueProcessor: a => he.decode(a) //default is a=>a\n */\nexport const xml = (config) => {\n    config = merge(__.xmloptions, config || {});\n    const j2x = new parser.j2xParser(config)\n    const ret = {\n        toXml: json => j2x.parse({ xml: json }),\n        toJson: xml => ret.deCDATA(parser.parse(xml, config)),\n        deCDATA: json => {\n            for (var k in json) {\n                if (json[k][config.cdataTagName]) json[k] = json[k][config.cdataTagName];\n                else if (typeof(json[k]) == 'object') ret.deCDATA(json[k]);\n            }\n            return json.xml;\n        }\n    }\n    return ret;\n};\n\n/**\n * 生成GUID\n */\nexport const GUID = function() {\n    return v4().replace(/\\-/g, '');\n};\nexport default {\n    environment,\n    prop,\n    link,\n    desc,\n    isValid,\n    getValue,\n    format,\n    sb,\n    showEx,\n    showException,\n    include,\n    random,\n    tryC,\n    tryC2,\n    watch,\n    isArray,\n    once,\n    whileC,\n    forC,\n    each,\n    finalC,\n    next,\n    callback,\n    callback2,\n    encHtml,\n    decHtml,\n    toJsonString,\n    json,\n    merge,\n    inherits,\n    create,\n    create2,\n    applyCAE,\n    pris,\n    hash,\n    hash2,\n    toTJson,\n    getType,\n    formatPrice,\n    encodeEmoji,\n    decodeEmoji,\n    GUID,\n    md5,\n    xhash,\n    xhmac,\n    xsign,\n    xverify,\n    xcrypt,\n    xdcrypt,\n    xml,\n    xcrypt_a1e,\n    xdcrypt_a1e\n};\n\n//const symbol = Symbol;\nconst pri = pris();\nconst __ = {\n    settings: Symbol('settings'),\n    exsettings: Symbol('exsettings'),\n    encreg: /<|>|~|(\\r\\n)|!|@|#|\\$|%|\\^|;|\\*|\\(|\\)|_|\\+|\\{|\\}|\\||:|\\\"|\\?|`|\\-|=|\\[|\\]|\\\\|;|\\'|,|\\.|\\/|，|；/g,\n    encmatch: /[a-zA-Z0-9\\u4E00-\\u9FA5\\uF900-\\uFA2D]|[\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]|<|>|~|(\\r\\n)|!|@|#|\\$|%|\\^|;|\\*|\\(|\\)|_|\\+|\\{|\\}|\\||:|\\\"|\\?|`|\\-|=|\\[|\\]|\\\\|;|\\'|,|\\.|\\/|，|；/g,\n    encother: { \"(\": \"%28\", \")\": \"%29\", \"*\": \"%2a\", \"'\": '%27', \".\": \"%2e\", \"-\": \"%2d\", \"_\": \"%5f\" },\n    funrep: function(s, o, reg, lreg, rreg) {\n        return s.replace(reg, function(word) {\n            const key = '' + word.replace(lreg, '').replace(rreg, '');\n            return o[key] || '';\n        });\n    },\n    /**\n     * StringBuilder nodejs版本 用于连续操作字符串对象而不经常移动数组 比较准确快捷的修改字符串内容\n     */\n    StringBuilder: class {\n        constructor() {\n            const that = this;\n            const {\n                _,\n                __\n            } = pri(that, {\n                data: [],\n                length: 0,\n                append: (str = \"\") => {\n                    const {\n                        _,\n                        __\n                    } = pri(that);\n                    __.data.push(str);\n                    __.length += str.length;\n                }\n            });\n        }\n        get length() {\n            return pri(this).__.length;\n        }\n        append(str) {\n            const {\n                _,\n                __\n            } = pri(this);\n            str = !!str ? __.append(str) : '';\n            return this;\n        }\n        appendFormat(fmt, data) {\n            return this.append(format(fmt, data));\n        }\n        insert(start, data) {\n            const {\n                _,\n                __\n            } = pri(this);\n            const str = _.toString();\n            __.data = [str.substr(0, start), data, str.substr(start)];\n            __.length = str.length + data.length;\n            return this;\n        }\n        insertFormat(start, fmt, data) {\n            this.insert(start, format(fmt, data));\n        }\n        remove(start, length) {\n            const {\n                _,\n                __\n            } = pri(this);\n            let str = _.toString();\n            __.data = [str.substr(0, start), str.substr(start + length)];\n            __.length = Math.max(0, str.length - length);\n            return _;\n        }\n        toString() {\n            const {\n                _,\n                __\n            } = pri(this);\n            __.data = [__.data.join('')];\n            return __.data[0];\n        }\n        clear() {\n            let ret = this.toString();\n            const {\n                _,\n                __\n            } = pri(this);\n            __.data = [];\n            __.length = 0;\n            return ret;\n        }\n    },\n    showEx: (e) => showEx('', e),\n    tryHandle: function(errcall = __.showEx) {\n        return {\n            apply: function(target, context, proxy) {\n                try {\n                    return Reflect.apply(...arguments);\n                } catch (e) {\n                    try {\n                        errcall(e);\n                    } catch (e2) {\n                        __.showEx(e);\n                    }\n                }\n            }\n        };\n    },\n    start: null,\n    emptyfunc: () => true,\n    sequfunc: async(exp, func, val) => {\n        let isStop = false;\n        while (!isStop && val != undefined) {\n            isStop = true === await callback2(func, null, val);\n            val = exp();\n        }\n        return true;\n    },\n    disorderfunc: (exp, func, val) => {\n        let data = [];\n        while (val != undefined) {\n            data.push(callback2(func, null, val));\n            val = exp();\n        }\n        return Promise.all(data);\n    },\n    disorderlfunc: (each, call) => {\n        while (!each.isStop && each.i <= each.data.length - 1 && each.count < each.limit) {\n            each.count++;\n            callback2(each.func, null, each.data[each.i++]).then(function(ret) {\n                each.isStop = !!ret;\n                each.count--;\n                __.disorderlfunc(each, call);\n            }).catch(function(e) {\n                each.error = e;\n                each.isStop = true;\n                each.count--;\n                __.disorderlfunc(each, call);\n            });\n        }\n        if (each.count <= 0 && (each.isStop || each.i > each.data.length - 1))\n            call(each.error, true);\n        return true;\n    },\n    disorderlEach: (data = [], func, limit = 1) => {\n        var each = { data, func, i: 0, count: 0, limit, isStop: false, error: null };\n        return callback2(call => {\n            __.disorderlfunc(each, call);\n        });\n    },\n    disorderffunc: (each, call) => {\n        while (!each.isStop && each.i <= each.data.length - 1 && each.count < each.limit) {\n            each.count++;\n            const val = each.data[each.i++];\n            callback2(each.func, null, val.k, val.v).then(function(ret) {\n                each.isStop = !!ret;\n                each.count--;\n                __.disorderffunc(each, call);\n            }).catch(function(e) {\n                each.error = e;\n                each.isStop = true;\n                each.count--;\n                __.disorderffunc(each, call);\n            });\n        }\n        if (each.count <= 0 && (each.isStop || each.i > each.data.length - 1))\n            call(each.error, true);\n        return true;\n    },\n    disorderlFor: (data = {}, func, limit = 1) => {\n        var each = { data: [], func, i: 0, count: 0, limit, isStop: false, error: null };\n        for (const k in data) {\n            each.data.push({ k, v: data[k] });\n        }\n        return callback2(call => {\n            __.disorderffunc(each, call);\n        });\n    },\n    disorderwfunc: (each, call) => {\n        while (!each.isStop && each.now != null && each.count < each.limit) {\n            each.count++;\n            var val = each.now;\n            each.now = each.exp();\n            if (val != null)\n                callback2(each.func, null, val).then(function(ret) {\n                    each.isStop = !!ret;\n                    each.count--;\n                    __.disorderwfunc(each, call);\n                }).catch(function(e) {\n                    each.error = e;\n                    each.isStop = true;\n                    each.count--;\n                    __.disorderwfunc(each, call);\n                });\n        }\n        if (each.count <= 0 && (each.isStop || each.now == null))\n            call(each.error, true);\n        return true;\n    },\n    disorderlWhile: (exp, func, limit = 1) => {\n        var each = { exp, func, i: 0, count: 0, limit, isStop: false, error: null };\n        return callback2(call => {\n            each.now = exp();\n            __.disorderwfunc(each, call);\n        });\n    },\n    sequEach: (data = [], func) => {\n        let i = 0;\n        return __.sequfunc(() => data[i++], func, data[i++]);\n    },\n    disorderEach: (data = [], func) => {\n        var ret = [];\n        data.forEach(k => ret.push(callback2(func, null, k)));\n        return Promise.all(ret);\n    },\n    sequFor: async(obj = {}, func) => {\n        for (const k in obj) {\n            if (true === await callback2(func, obj, k, obj[k]))\n                return true;\n        }\n        return true;\n    },\n    disorderFor: (obj = {}, func) => {\n        let data = [];\n        for (const k in obj) data.push(callback2(func, obj, k, obj[k]));\n        return Promise.all(data);\n    },\n    index: 0,\n    getTJsonValue: (p, quotation = true) => {\n        switch (typeof(p)) {\n            //case 'number':\n            //case 'boolean':\n            //    return p;\n            case 'undefined':\n                return \"\\\"\\\"\";\n            case 'object':\n                switch (p + \"\") {\n                    case \"null\":\n                        return \"\\\"\\\"\";\n                    default:\n                        return quotation ? \"\\\"\" + (p + '').replace(/['\"\\\\]/g, function(v) {\n                            return '\\\\' + v;\n                        }) + \"\\\"\" : '' + p;\n                }\n            default:\n                return quotation ? \"\\\"\" + (p + '').replace(/['\"\\\\]/g, function(v) {\n                    return '\\\\' + v;\n                }) + \"\\\"\" : '' + p;\n        }\n    },\n    clone: source => {\n        switch (getType(source)) {\n            case 'Object':\n            case 'object':\n                return __.merge({}, source);\n            case 'array':\n            case 'Array':\n                const aim = [];\n                for (const i in source) {\n                    aim.push(__.clone(source[i]));\n                }\n                return aim;\n            default:\n                return source;\n        }\n    },\n    merge: (aim, source) => {\n        //tochange VJ's merge\n        if (!(typeof(source) == 'object' && !isArray(source))) {\n            return aim;\n        }\n        for (const i in source) {\n            if (source[i] !== undefined) {\n                if (!isValid(aim[i])) {\n                    aim[i] = __.clone(source[i]);\n                } else {\n                    switch (getType(aim[i])) {\n                        case 'object':\n                        case 'Object':\n                            __.merge(aim[i], source[i]);\n                            break;\n                        case 'Array':\n                            //处理数组\n                            let hasmergeIndex = false;\n                            for (let i3 = 0, k = source[i][i3]; i3 < source[i].length; i3++, k = source[i][i3]) {\n                                if (typeof(k.mergeIndex) == \"number\") {\n                                    hasmergeIndex = true;\n                                    if (aim[i].length < (k.mergeIndex + 1)) {\n                                        aim[i].push(k);\n                                    } else {\n                                        aim[i][i3] = __.merge(aim[i][i3], k);\n                                    }\n                                } else if (typeof(k.moveIndex) == \"number\") {\n                                    hasmergeIndex = true;\n                                    aim[i].splice(k.moveIndex, 0, k);\n                                }\n                            }\n                            if (!hasmergeIndex) {\n                                aim[i] = __.clone(source[i]);\n                            }\n                            break;\n                        default:\n                            aim[i] = source[i];\n                            break;\n                    }\n                }\n            }\n        }\n        return aim;\n    },\n    /**\n     * 从base64 转成 binary\n     */\n    convert2Binary: (str) => {\n        return new Buffer(str, 'base64').toString('binary');\n    },\n    /**\n     * 从string 转成 base64\n     */\n    convert2Base64: (str) => {\n        var buffer;\n        if (str instanceof Buffer) {\n            buffer = str;\n        } else {\n            buffer = new Buffer(str.toString(), 'binary');\n        }\n        return buffer.toString('base64');\n    },\n    include: {},\n    unclude: {},\n    xmloptions: {\n        attributeNamePrefix: \"@_\",\n        attrNodeName: \"attr\", //default is 'false'\n        textNodeName: \"#text\",\n        ignoreAttributes: true,\n        ignoreNameSpace: false,\n        allowBooleanAttributes: false,\n        parseNodeValue: true,\n        parseAttributeValue: false,\n        trimValues: true,\n        cdataTagName: \"__cdata\", //default is 'false'\n        cdataPositionChar: \"\\\\c\",\n        localeRange: \"\", //To support non english character in tag/attribute values.\n        parseTrueNumberOnly: false,\n        attrValueProcessor: a => he.decode(a, { isAttributeValue: true }), //default is a=>a\n        tagValueProcessor: a => he.decode(a) //default is a=>a\n    }\n}; {\n    //日期函数处理\n    Date.prototype.DIC = { 'y': 'FullYear', 'q': 'Month', 'm': 'Month', 'w': 'Date', 'd': 'Date', 'h': 'Hours', 'n': 'Minutes', 's': 'Seconds', 'ms': 'MilliSeconds' };\n    Date.prototype.add = function(interval, number) {\n            var d = new Date(this.getTime());\n            var k = Date.prototype.DIC;\n            var n = { 'q': 3, 'w': 7 };\n\n            k[interval] ? d['set' + k[interval]](Math.A(d['get' + k[interval]](), Math.X((n[interval] || 1), number))) : (function() { throw new Error('interval参数不是支持的类型:' + toJsonString(k)); })()\n            return d;\n        }\n        /* 计算两日期相差的日期年月日等 new Date().diff('h',new Date().add('d',1)); */\n    Date.prototype.diff = function(interval, objDate2) {\n            const d = this,\n                i = {},\n                t = d.getTime(),\n                t2 = objDate2.getTime();\n            i['y'] = objDate2.getFullYear() - d.getFullYear();\n            i['q'] = i['y'] * 4 + Math.floor(objDate2.getMonth() / 4) - Math.floor(d.getMonth() / 4);\n            i['m'] = i['y'] * 12 + objDate2.getMonth() - d.getMonth();\n            i['ms'] = objDate2.getTime() - d.getTime();\n            // i['w'] = Math.floor((t2 + 345600000) / (604800000)) - Math.floor((t + 345600000) / (604800000));\n            // i['d'] = Math.floor(t2 / 86400000) - Math.floor(t / 86400000);\n            // i['h'] = Math.floor(t2 / 3600000) - Math.floor(t / 3600000);\n            // i['n'] = Math.floor(t2 / 60000) - Math.floor(t / 60000);\n            // i['s'] = Math.floor(t2 / 1000) - Math.floor(t / 1000);\n            i['w'] = Math.floor(Math.D(Math.S(t2, t), (604800000.0)));\n            i['d'] = Math.floor(Math.D(Math.S(t2, t), 86400000.0));\n            i['h'] = Math.floor(Math.D(Math.S(t2, t), 3600000.0));\n            i['n'] = Math.floor(Math.D(Math.S(t2, t), 60000.0));\n            i['s'] = Math.floor(Math.D(Math.S(t2, t), 1000.0));\n            return i[interval];\n        }\n        /* 计算两日期相差的日期年月日等 new Date().diff('h',new Date().add('d',1)); */\n    Date.prototype.sub = function(interval, objDate2) {\n            return Date.prototype.diff.apply(objDate2, [interval, this]);\n        }\n        /* 计算两日期相差的日期年月日等 new Date().toString('yyyy-MM-dd'); */\n    Date.prototype.toString = function(fmt) {\n        const o = {\n            \"M+\": this.getMonth() + 1, //月份           \n            \"d+\": this.getDate(), //日           \n            \"h+\": this.getHours() % 12 == 0 ? 12 : this.getHours() % 12, //小时           \n            \"H+\": this.getHours(), //小时           \n            \"m+\": this.getMinutes(), //分           \n            \"s+\": this.getSeconds(), //秒           \n            \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度           \n            \"S\": this.getMilliseconds() //毫秒           \n        };\n        const week = {\n            \"0\": \"/u65e5\",\n            \"1\": \"/u4e00\",\n            \"2\": \"/u4e8c\",\n            \"3\": \"/u4e09\",\n            \"4\": \"/u56db\",\n            \"5\": \"/u4e94\",\n            \"6\": \"/u516d\"\n        };\n        if (fmt) {} else {\n            fmt = 'yyyy/MM/dd HH:mm:ss';\n        }\n        if (/(y+)/.test(fmt)) {\n            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n        }\n        if (/(E+)/.test(fmt)) {\n            fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? \"/u661f/u671f\" : \"/u5468\") : \"\") + week[this.getDay() + \"\"]);\n        }\n        for (const k in o) {\n            if (new RegExp(\"(\" + k + \")\").test(fmt)) {\n                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n            }\n        }\n        return fmt;\n    };\n    //字符串函数扩展\n    String.prototype.endWith = String.prototype.endsWith;\n    String.prototype.startWith = String.prototype.startsWith;\n    String.prototype.eq = function(str = '', isOri) {\n        str = str + '';\n        return isOri ? (this == str) : (this.toLowerCase() == str.toLowerCase());\n    };\n    String.prototype.trim = function(chr) {\n        switch (chr) {\n            case '/':\n            case '\\\\':\n            case '?':\n            case '[':\n            case ']':\n            case '.':\n            case '*':\n            case '(':\n            case ')':\n            case '{':\n            case '}':\n            case '|':\n            case '^':\n            case '$':\n            case '+':\n                chr = '\\\\' + chr;\n                break;\n        }　　\n        return this.replace(isValid(chr) ? new RegExp('(^(' + chr + ')+)|((' + chr + ')+$)', 'g') : /(^\\s+)|(\\s+$)/g, \"\");\n    }\n\n    /**\n     * 高精度 加法\n     */\n    Math.A = function(...args) {\n        var a = new Decimal(0);\n        args.forEach(v => a = a.add(v));\n        return a.toNumber();\n    }\n\n    /**\n     * 高精度 减法\n     */\n    Math.S = function(...args) {\n        var a = new Decimal(args[0]);\n        args.slice(1).forEach(v => a = a.sub(v));\n        return a.toNumber();\n    }\n\n    /**\n     * 高精度 乘法\n     */\n    Math.X = function(...args) {\n        var a = new Decimal(1);\n        args.forEach(v => a = a.mul(v));\n        return a.toNumber();\n    };\n\n    /**\n     * 高精度 除法\n     */\n    Math.D = function(...args) {\n        var a = new Decimal(args[0]);\n        args.slice(1).forEach(v => a = a.div(v));\n        return a.toNumber();\n    };\n}"]}