<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="Add multi-touch gestures to your webpage.">
    <title>VJ test</title>
    <script src="2.0/ref/jquery-1.8.0.min.js" type="text/javascript"></script>
	<script src="2.0/VJ.js" type="text/javascript"></script>
	<script src="config.js" type="text/javascript"></script>
	<script src="ni.js" type="text/javascript"></script>
	<style type="text/css">		
		.animate {transition: all 0.3s;-webkit-animation-timing-function:ease;}		
	</style>
	<script type="text/javascript">
		/*
		VJ.ajax({url:'http://www.sohu.com',data:{a:1},bindData:function(){alert(222);}});
		//VJ.each([1,2,3,4,5],function(i,v){//console.log(i+":"+v);
		//console.log(VJ.format('<%=i%>==<%=v%>',{i:i,v:v}));});
		console.log(VJ.config.getBaseConfigManager());
		console.log(VJ.config.getBaseConfigManager().getConfigValue('AppSettings','a'));
		var a = VJ.config.getApplicationConfigManagerFromObj({AppSettings:{a:1,b:2,c:3}});
		console.log(a.getConfigValue('AppSettings','a'));
		console.log(VJ.config.getBaseConfigManager().getConfigValue("AppSettings",'a'));
		var b = new function(){
			var _= this;
			{_['abc']=function(a,b,c){console.log(a+b+c+_.bcd);};_.bcd = 22;}
		};
		console.log(b["bcd"]);
		b['abc']();
		b.pack = 33;
		console.log(b['pack']);
		console.log("1.a.b".indexOf('\.'));
		b.abc.apply(b.abc,[1,2,3]);
		b.abc.call([1,2,3]);
		console.log(typeof(11223)=='number');
		var data = [{},1,""];
		for(var i in data){
			if(typeof(data[i])==='object'){
				console.log('obj');
			}else{console.log(data[i]);}
		}
		console.log(VJ.random());
		console.log(VJ.random());
		console.log(b);
		b = VJ.merge(b,{test:222});
		console.log(b);
		var a = {};
		a.a=1;
		a.b=2;
		for(var i in a){
			console.log(a[i]);
		}*/
	</script>
	<script type="text/javascript">
		/*
		var hello = function(a,b){			
			var _ = this;
			var num = VJ.random();
			{
				console.log('hello create '+num);
				console.log(arguments);
				console.log(a);
				console.log(b);
			}
			_.firstLove = function(){console.log('firstLove');return true;};
			_.test = function(){console.log(num);return num;}
		};
		hello.prototype.Instance = function(){return new hello();};
		var test = function(a,b){
			var _ = this;
			var __ = {};
			{
				console.log('test create '+VJ.random());
				console.log(arguments);
				console.log(a);
				console.log(b);
			}
			_.abc = function(){
				console.log('test.abc');
			};
		};
		//console.log(VJ.create(hello,[1,2]));
		
		//var val = VJ.create2('hello',[111,2222]);eval('(new hello(args[0],args[1]))')
		//console.log(eval(concreate('hello',paras)));
		//console.log(eval('(VJ.create(hello,args))'));
		//console.log(hello.prototype.constructor(1,2));//.constructor.apply({},[1,2])
		//console.log(new function(){var _ = this;hello.apply(_,[{a:3},{b:4}]);});
		//var v = new function(){var _ = this;VJ.inherit.apply(_,[hello,[{a:3},{b:4}]]);};
		//console.log(VJ.Instance());
		/*测试目的，应可以支持本地对象生成，远程对象生成，支持mode为static instance pool 支持 method 为constructor，bean，factory，constructorbean，factorybean 5种方式 并支持 pack */
		//本地+static+constructor+bean+pool+factory+factorybean+constructorparalength+size+pack+path
		/*var middler = VJ.middler.getMiddlerFromObj({
			Middler:{
				KD:{
					pack:'hello',
					path1:'http://localhost/dl/hello.js',
					method:'constructor',
					mode:'static',
					helloword2:{type:'.prototype.Instance',mode:'static',size:1,method:'factorybean',constructorparalength:1,
						params:[
							{a:1},
							{b:1}
						]
					},
					helloword:{type:'hello',mode:'pool',params:[
						{a:1},
						{ref:'Ni/test'}
					]},
					h3:{type:'hl',params:[1,2]}
				},
				Ni:{
					test:{type:'test',params:[4,{this:true}]},
					test2:{mode:'instance',params:[
						{type:'hello',params:[1,1]},
						{type:'hello',params:[2,{ref:'Ni/test'}]},
					]}
				}
			}
		});
		//console.log(middler);
		//本地+static+constructor+bean+pool+factory+factorybean+constructorparalength+size+pack+path
		var val = middler.getObjectByAppName('Ni','test2');
		middler.getObjectByAppName('KD','h3');
		var val1 = middler.getObjectByAppName('KD','helloword');
		console.log(val);
		/*middler.setObjectByAppName('KD','helloword2',val);
		var val1 = middler.getObjectByAppName('KD','helloword2');
		console.log(val1);
		
		val.firstLove();
		val.test();
		val1.test();
		console.log(middler.getTypeByAppName('KD','helloword'));
		middler.setObjectByAppName('KD','helloword',val1);
		var val2 = middler.getObjectByAppName('KD','helloword');
		val2.test();		
		middler.setObjectByAppName('KD','helloword',val);
		setTimeout(function(){
			val1 = middler.getObjectByAppName('KD','helloword');
			val1.test();
		},20000);*/
		/*
		console.log(val);	
		var __ = {};
		__.data = {a:1};
		for(var i in __.data){delete __.data[i];}
		console.log([].shift());
		console.log(typeof([]));
		//throw new Error('不支持WebSocket!');
		var a = function(){
			var _ = this,__= {};
				{
					__.c = function(){alert(33);};
					console.log('a create')
				}
			_.cc = function(){alert('44');};
			a.prototype.b = function(){alert('11');};
			a.prototype.dd  = function(){alert(55);};
		};
		var b = function(){
			VJ.inherit.apply(this,[a,[]]);
			this.b = function(){alert(22);}
		};
		var c = function(){			
			VJ.inherit.apply(this,[b,[]]);
		};
		console.log(new c());
		new c().base.dd();
		
		var test3 = function(){
			var _ = this,__= {};
			{
				_.a= 1;
				_.b = 2;
				_.show = function(){console.log(_);};
			}
			
		};
		var bb = (function(){return eval('(new test3())');})();
		bb.config = function(){console.log(444);};
		bb.show();
		console.log(bb);	
		console.log(VJ.merge({},{a:'111',b:[{a:1,b:2},{a:2,b:3}]}));
		console.log('insert into ?,?'.split('?'));
		console.log([1,2].slice(1,1));*/
	</script>
	<script type="text/javascript">
		//totest ajax jsonp/getScript localStorage sessionStorage js ObjectDB websocket
		//template能够返回数据，能正常关闭，能顺序调用和提交
		//可以定义和调用多个template
		//可以通过Ni文件中规定的template名字调用真实的template
		
		//localStorage sessionStorage js ObjectDB websocket
		//可以通过定义Decator的template附件缓存
		if(false){
		var niconfig = {
			Ni:{
				ajaxtest2:{command:'http://localhost/VESHTest/Module/help/test.tjsonp?_n=recorder',dbtype:'tjson',params:{limit:11},template:'template1'},
				ajaxtest1:{command:'http://localhost/KDAPI/Module/GetOrderTrackItems.tjsonp?_n=Order',dbtype:'tjson',params:{},template:'template1'},
				'ajaxtest1.Cache':{command1:function(res,params){return res[params.cacheKey];},dbtype:'json',params:{},template:'template2'},
				'ajaxtest1.Set':{command1:function(res,params){res[params.cacheKey] = params.cacheValue;},dbtype:'json',params:{timeout1:{interval:'s',number:50}},template:'template2'},
				sqlinsert:{command:'create table if not exists table1(name Text,message text,time integer);insert into table1 values(?,?,?);',dbtype:'json',params:{data:[]},template:'sqltemp'},
				sqlselect:{command:'select * from table1;',dbtype:'json',params:{data:[]},template:'sqltemp'},
				sqlselect2:{command:'select * from table1 where name=?',dbtype:'json',params:{data:[]},template:'sqltemp'}
			}
		};
		var conf = VJ.config.getApplicationConfigManagerFromObj({
			Middler:{
				VESH:{
					AREADROP:{type:'',params:['']}
				},
				Ni:{
					pack:'VJ.ni',
					constructorparalength:false,size:50,app:'33',
					method:'constructor',
					mode:'static',
					test1:{type:'test',params:[4,{self:true}]},
					test:{type:'test',method:'bean',params:[{params:'Item','a':1,b:2,c:3,d:{type:'test',method:'constructor',params:[4,{self1:true}]}}]},
					ajaxresource:{type:'.NiAjaxDataFactory'},
					objresource:{type:'.NiObjectDataFactory'},
					sqlitefactory:{type:'.NiSqliteDataFactory'},
					cm:{type:'VJ.config.getApplicationConfigManagerFromObj',params:[niconfig],method:'factory'},
					template3:{type:'.NiTemplate',mode:'instance',params:[
						{type:'.NiPoolDataResource',params:[{ref:'ajaxresource'},{dbtype:'tjson',jsonp:'_bk'}]},
						{ref:'cm'}
					]},
					template2:{type:'.NiTemplateDecorator',mode:'instance',params:[
						{type:'.NiStaticDataResource',params:[{ref:'ajaxresource'},{dbtype:'tjson',jsonp:'_bk'}]},
						{type:'.NiStaticDataResource',params:[{ref:'objresource'},{resource:window.sessionStorage}]},
						{ref:'cm'},
						{timeout:{interval:'s',number:50}}
					]},	
					template1:{type:'.NiTemplate',mode:'instance',params:[
						{type:'.NiPoolDataResource',params:[{ref:'ajaxresource'},{dbtype:'tjson',jsonp:'_bk'}]},
						{ref:'cm'}
					]},				
					template:{type:'.NiMultiTemplateDecorator',mode:'instance',params:[
						{type:'.NiStaticDataResource',params:[{ref:'ajaxresource'},{dbtype:'tjson',jsonp:'_bk'}]},
						{ref:'cm'},
						{self:true},
						'Ni'
					]},
					sqltemp:{type:'.NiTemplateDecorator',mode:'instance',params:[
						{type:'.NiStaticDataResource',params:[{ref:'sqlitefactory'},{name:'baibings',version:'1.0',desc:'baibings',size:2*1024*1024}]},
						{type:'.NiStaticDataResource',params:[{ref:'objresource'},{resource:window.sessionStorage}]},
						{ref:'cm'},
						{timeout:{interval:'s',number:50}}
					]}
				}
			}
		});
		var test = function(a,b){
			var _ = this;
			var __ = {};
			{
				console.log('test create '+VJ.random());
				console.log(arguments);
				console.log(a);
				console.log(b);
			}
			_.abc = function(){
				console.log('test.abc');
			};
			_.setItem = function(key,val){console.log(key+':'+val);};
		};
		
		var mid = new VJ.middler.Middler(conf);
		mid.getObjectByAppName('Ni','test');
		/*var ni = new VJ.ni.NiTemplateManager(conf,'Ni');
		
		ni.transaction = true;
		var res = ni.excute('template','ajaxtest1',{SONumber:10000923117184},function(res){	
			res.each('ajaxtest1',function(data){
				VJ.each(data,function(v){
					console.log(v);
				});
			});
		});*/
		var temp = mid.getObjectByAppName('Ni','template');
		temp.transaction = true;
		/*
		temp.excute('ajaxtest1',{SONumber:10000923117184},function(res){		
			res.each('ajaxtest1',function(data){
				VJ.each(data,function(v){
					console.log(v);
				});
			});
		});		
		temp.excute('ajaxtest1',{SONumber:10001103386854},function(res){		
			res.each('ajaxtest1',function(data){
				VJ.each(data,function(v){
					console.log(v);
				});
			});
		});
		setTimeout(function(){
			temp.excute('ajaxtest1',{SONumber:10001103386854},function(res){
				console.log(22);
				res.each('ajaxtest1',function(data){
					VJ.each(data,function(v){
						console.log(v);
					});
				});
			});
		},3000);
		console.log(temp.commit().last());*/
		//ajax+static+instance+pool
		//连续提交 
		//console.log(VJ.merge({a:1},{b:2}));
		/*
		console.log(mid.getObjectByAppName('Ni','template'));
		console.log(mid.getObjectByAppName('Ni','ajaxresource'));console.log(mid.getObjectByAppName('Ni','cm').getConfigValue('Ni','ajaxtest1'));
		*/
		//如何设置timeout decorator调用的缓存和命令是否还需要？不需要了 params里面的timeout 分为 interval,number 是否需要Cookie 不实现Cookie
		/*window.localStorage.setItem('1','1');
		if(window.localStorage.setItem)
			console.log(window.localStorage.setItem);*/
		if(false){
			var conn = openDatabase('mydb','1.0','mydbdesc',2*1024*1024);
			conn.transaction(function(tx){
				tx.executeSql('create table if not exists table1(name Text,message text,time integer);insert into table1 values(?,?,?);',[1,1,1],function(){console.log('success');},function(){console.log('error');});
			});
		}
		if(false){
			temp.excute('sqlinsert',{data:['1','1',1]},function(res){		
				console.log(res.last());
			});
			temp.excute('sqlinsert',{data:['2','2',2]},function(res){		
				console.log(res.last());
			});
			temp.excute('sqlselect',{},function(res){
				//console.log(res.last());
				res.each('sqlselect',function(data){
					VJ.each(data,function(v){console.log(v);});
				});
			});
			temp.commit();
		}
		}
	</script>
	<script type="text/javascript">
		if(true){
			//验证子控件是可行的
			var APanel = function(panel,path,vm){
				var _ = this,__ = {};
				{
					VJ.inherit.apply(_,[panel,['<div><textbox id="txt2" _="key:\'输入框212:\'"></textbox></div>',vm || {
						data:{},
						controls:{
							txt2:{	
								data:{text:'text2'},
								onLoad:function(data,self){									
									VJ.once(function(){self.update({value:'测试成功!'});},1000);
									console.log(this);
								}
							}
						}
					}]]);					
				}
			};
			//todo 根据panel孩子节点 全部整理成与父类一样大小 ，然后 设置overflow:hidden 根据direction属性设置为hor或者vol，根据属性value设置当前的对象和onchange事件。
			//todo 实现商品列表
			//todo 实现panel子类直接显示	
			//
			//一个是 没有探测出来回滚的位置 方向似乎不正确
			// 1. 当向下拉动时 动画移动的位置不能大于limit 移动位置大于5即可判断为reload事件 且超出0设置为回滚到0
			// 2. 当向上拉动时 动画距离不能小于-panel.height+node.height-limit 移动位置小于-panel.height+node.height-5即可判断为next事件 且小于-panel.height+node.height则回滚到-panel.height+node.height
			var BPanel = function(panel,path,vm,limit,limitBack){
				var _ = this,__ = {};
				{	
					VJ.inherit.apply(_,[panel,[VJ.getValue(path, '<div style="overflow:hidden;"><div style="display:none;"></div></div>'),VJ.getValue(vm,{
						data:{direction:'vol',value:0},						
						onLeft:function(data,self){_.call('next')},
						onRight:function(data,self){_.call('reload')},
						onUp:function(data,self){_.call('next')},
						onDown:function(data,self){_.call('reload');}
					}),limit || 0.2,limitBack || true]]);
					__.onLoad = _.onLoad;
					__.render = _.render;
					VJ.merge(_.status.transform,{x:0,y:0},true);
				}
				_.onLoad = function(node){
					node.removeClass('animate');
					_.panel = node.find('div:first');
					_.children  = _.panel.siblings();
					if(_.children.length==0) return;
					_.length = _.children.length;					
					_.value = Math.max(0,Math.min(_.children.length,parseInt(_.value)));
					_.children.css('position','relative');
					_.children.addClass('noactive');
					_.panel.append(_.children);
					//根据direction覆盖监听操作 同时修改panelaction
					var dir = _.get().direction;
					switch(dir){
						case 'vol':
							_.vol = true;
							delete _.events.left;
							delete _.events.right;
							//取消水平操作动画
							_.panel.css('width','100%');
							_.children.css('width','100%')
							break;
						case 'hor':
						default:
							//取消垂直操作动画
							_.hor = true;
							delete _.events.up;
							delete _.events.down;
							_.panel.css('height','100%');//.css('display','flex');						
							_.children.css('height','100%').css('float','left');
							break;
					}
					VJ.forC(_.events,function(k,v){
						k = k.toLowerCase();
						switch(k){
							case 'next':
							case 'reload':
								break;
							default:
								_.bindEvent(node,k,v);
								break;
						}
					},function(){__.onLoad(node);});
				};
				//以方便继承类覆盖并执行动画
				_.onLeft = function(ev,e){
					if(_.vol) return;
					__.distance = Math.max(Math.abs(ev.velocity*ev.deltaTime),ev.distance);					
					var x = e.transform.x+ev.deltaX;
					if(x < (_.node.width()-5-_.panel.width())){e.callevent.value=true;}
					if(x > (_.node.width()-e.limit-_.panel.width())){_.am(_.panel,{tx:(e.left||e.leftout)?x:Math.max(0,ev.deltaX),ty:0});} else return e.limitBack;
				};
				_.onRight = function(ev,e){
					if(_.vol) return;
					__.distance = Math.max(Math.abs(ev.velocity*ev.deltaTime),ev.distance);					
					var x = e.transform.x+ev.deltaX;
					if(x > 5){e.callevent.value=true;}
					if(x < e.limit){_.am(_.panel,{tx:(e.right||e.rightout)?x:Math.max(0,ev.deltaX),ty:0});} else return e.limitBack;
				};
				_.onUp = function(ev,e){
					if(_.hor) return;
					__.distance = Math.max(Math.abs(ev.velocity*ev.deltaTime),ev.distance)
					var y = e.transform.y+ev.deltaY;
					if(y < (_.node.height()-5-_.panel.height())){e.callevent.value=true;}
					if(y > (_.node.height()-e.limit-_.panel.height())){_.am(_.panel,{ty:(e.up||e.upout)?y:Math.max(0,ev.deltaY),tx:0});} else return e.limitBack;
				};
				_.onDown = function(ev,e){
					if(_.hor) return;
					__.distance = Math.max(Math.abs(ev.velocity*ev.deltaTime),ev.distance);					
					var y = e.transform.y+ev.deltaY;
					if(y > 5){e.callevent.value=true;}
					if(y < limit){_.am(_.panel,{ty:(e.down||e.downout)?y:Math.max(0,ev.deltaY),tx:0});} else return e.limitBack;
				};
				_.onScale = function(ev,e){
					if(Math.abs(ev.scale-1)*Math.min(_.node.width(),_.node.height)<e.limit) _.am(_.panel,{scale:ev.scale});
					else {e.callevent.value = true;}};
				//low设计需要区别第一次
				__.first = true;
				_.render = function(data){				
					data = __.render(data);
					VJ.forC(data,function(k,v){
						switch(k.toLowerCase()){
							case 'value':
								_.onValue([v],function(content){_.panel.append(content);});
								break;
							case 'values':
								_.onValue(v,function(content){_.panel.empty().append(content);});
								break;
							case 'addValues':						
								_.onValue(v,function(content){_.panel.append(content);});
								break;
						}
					},function(){
					},true);
					_.panel.show();
				};
				//一般需要重载此方法即可
				_.onValue = function(v,func){
					console.log(v);
					if(!VJ.isArray(v)) v = [v];
					var sb = VJ.sb();
					VJ.each(v,function(v2){sb.append(VJ.toJsonString(v2));},function(){func(sb.clear());sb = null;});
				};			
				_.onBackAnimate = function(node,e){
					VJ.once(function(){
						console.log(e.transform.x+":"+e.transform.tx);
						if(e.vol && e.transform.ty<0 && e.transform.ty > (_.node.height() - _.panel.height())){e.transform.y = e.transform.ty;return;}
						if(e.hor && e.transform.tx<0 && e.transform.tx > (_.node.width() - _.panel.width())){e.transform.x = e.transform.tx;return;}
						VJ.merge(e.transform,{
							tx:Math.min(0,Math.max(_.node.width() - _.panel.width(),e.transform.tx)),
							ty:Math.min(0,Math.max(_.node.height() - _.panel.height(),e.transform.ty)),
							scale:1,angle:0,rx:0,ry:0,rz:0,startX:0,startY:0},true);
						VJ.merge(e.transform,{x:e.transform.tx,y:e.transform.ty},true);
						//等待1秒是希望在触发事件更新Index之后再处理动画才能合理显示
						var value = VJ.format('translate3d({tx}px,{ty}px,0px) scale({scale},{scale}) rotate3d({rx},{ry},{rz},{angle}deg)',e.transform);
						_.panel.addClass('animate').css('webkitTransform',value).css('mozTransform',value).css('transform',value).show();
						/*var cur = $(_.children.get(_.index));
						if(cur.hasClass('noactive')){
							cur.removeClass('noactive').addClass('active');
							//不仅仅是动画 需要显示
							_._animate('fadeOut',_.panel.children(':lt('+_.index+').active,:gt('+_.index+').active'),function(){
								_.panel.children(':lt('+_.index+').active,:gt('+_.index+').active').hide().removeClass('active').addClass('noactive');
							})
							_._animate('fadeIn',cur,function(){cur.show();});
						}*/
					},10);
				};
			};
			//CPanel todo 计算所有children的位置 将其大小都改为100%
			//识别 上下左右滑动及其动画，同时支持滑入滑出，支持点击或者tap，支持加载动画
			//data:{values:[]}
			//show left/right/up/down/fade
			//onUp/onDown/onLeft/onRight/show/hide/click 识别 tap,click/
			//'<div style="background:blue;width:50px;height:50px;"></div>'
			//如何保证 当其没有上下监听事件时 能够正常的拖动
			//制作横向滚动分屏的控件 和纵向滚动的控件
			//建立数据库
			(function(V,M,$,cm){
				new function(){
					var _ = this,__ = {};
					{
						VJ.isDebug = true;
						VJ.inherit.apply(_,[M.Page,[cm,{
							txt3:{
								data:{validate:{isRequired:'必须输入值!'}},
								onLoad:function(data,self){
									console.log('txt3 load');
									console.log(self);
								},
								onError:function(data,self){
									console.log(self);
									self.update({animate:'tada',value:data.error});
								},
								onFocus:function(data,self){									
									if(data.isError) {self.update({value:''});}
								}
							},
							txt:{
								type:'textbox',
								data:{text:'hello world',visible:false,validate:{isNumber:'请输入数字'}},
								onReady:function(data,self){
									console.log('');
									setTimeout(function(){self.update({visible:true});},2000);
								},
								onClick:function(data){
										
								},
								onError:function(data,self){
									console.log(data.error);
								},
								onHover:function(data){
									console.log(data);
								},
								onKeyPress:function(data,self){
									console.log(data);
								},
								onChange:function(data){
									console.log(data);// W.Control 对 事件的处理
									return {key:'222'};
									//return {key:'222'};
								}
							},
							but:{
								onClick:function(data,cons){console.log(cons);cons.txt.update({text:'点击收到!',valid:true});}
							},
							chk:{
								data:{checked:true},onHover:function(data){
									console.log(data);
								},
								onChange:function(data){
									console.log(data);
								}
							},
							but:{
								onClick:function(data,self){
									var _ = this;
									this.txt.update({text:_.rl.get().value,animate:'tada'});
									//this.sub.update({animate:{'zoomOutUp':function(){_.sub.update({visible:false})}}});
									if(this.sub.data.visible)
										this.sub.update({hide:'zoomOutUp'});
									else
										this.sub.update({show:'zoomInDown'});
									this.txt2.update({text:_.cl.get().value});
									//this.txt3.update({text:_.sel.get().value});
									console.log(this.txt3.get());
									this.txt3.update({valid:true});
								}
							},
							rl:{
								data:{values:{e:1,r:2,t:3},value:2},
								onLoad:function(data,self){
									setTimeout(function(){self.update({values:{a:1,b:2,c:3}})},2000);
								}
							},							
							cl:{
								data:{values:{e:1,r:2,t:3},value:"2,3"}
							},					
							sel:{
								data:{values:{e:1,r:2,t:3},value:2},
								onChange:function(data,self){
									console.log(data.value);
								}
							},
							panel:{
								data:{value:0,visible:true},
								onLoad:function(data,self){									
									//self.update({show:'fadeInRight'});
								},
								onClick1:function(data,self){
									console.log(data);
								},
								onRotate:function(data,self){
									console.log(1);
								},
								onScale1:function(data,self){
								},
								onLeft:function(){console.log('left');},
								onRight:function(){console.log('right');},
								onUp1:function(data,self){
								//distance没提交
								console.log(data);
								window.scrollTo(0,self.VJ.node.top()+data.distance);},
								onDown1:function(){
								window.scrollTo(0,self.VJ.node.top()-data.distance);}
							},
							panel2:{
								data:{value:0,visible:true},
								onLoad:function(data,self){									
									//self.update({show:'fadeInRight'});
								},
								onClick:function(data,self){
									//console.log(data);
								},	
								onLeft:function(){},
								onRight:function(){console.log('panel2 right');},
								onUp:function(data,self){
									console.log('up');
									self.update({attr:{style:'width:300px;height:300px;background:blue;overflow:scroll;'}});
								},
								onDown1:function(data,self){
									console.log('down');
									//this.txt.update({text:'rightout'});
								}
							},
							fill:{
								data:{},
								onLoad:function(data,self){
									//todo onload 在data的value的上面执行
									self.update({value:{text:navigator.userAgent.toLowerCase(),ver:VJ.toJsonString(VJ.userAgent),web:VJ.userAgent.pad?'本':(VJ.userAgent.mobile?'手机':'电脑')}});
									//self.update({value:{text:'111'}});
									//VJ.once(function(){},1);
									//VJ.once(function(){self.update({value:{abc:'abc2',text:'FillControl首秀2!'}});},2000);
								}
							},
							bp:{data:{value:2},
								onChange:function(data,self){
									console.log('change'+data.value);
								}
							},
							bp2:{data:{values1:[{a:2},{a:3},{b:4}]},
								onReload:function(data,self){
									console.log('reload');
								},								
								onNext:function(data,self){
									console.log('next');
								}
							},
							his:{data:{},onChange:function(data,self){
								console.log('onchange:'+data.hash);
								console.log(data);
								VJ.once(function(){self.update({back:true});},1000);
							}},
							page:{
								data:{
									title:'测试页面aa'
								},
								onStart:function(data,self){
									var __ = this;
									VJ.once(function(){
										console.log(__.txt);
										__.txt.update({enable:true,visiable:true,text:'22233'});
									},2000);
									this.his.update({add:'abc'});									
									//this.his.update({add:'bcd'});
									//console.log(this);
									/*_.ni.excute('template','ajaxtest1',{SONumber:10001103386854},function(res){
										//console.log(res.get('ajaxtest1'));
										console.log(res.get('ajaxtest1'));
										//res.each('ajaxtest1',function(v){VJ.each(v,function(v){console.log(v);});});
									});*/
									//console.log(_.middler.getObjectByAppName(M.APP,'SessionDataManager'));
									_.session.update('ssss',{aaaa:22});
									//console.log(_.session.data('kd2.0'));
									//_.session.update('kd2.0',{casting:'223232222222223332222333232',mobile:'133520493404'});									
									//跨域同步请求要求 IIS支持添加Html返回头 Access-Control-Allow-Origin: * 或者具体的域名
									//setTimeout(function(){
									//console.log(VJ.userAgent);
									//	VJ.include('http://10.32.11.166:800/kd/js/s_code.js');
									//	console.log(s_account);
									//},100);
									//setTimeout(function(){console.log(s_account);},1);
								},
								onDispose:function(){
									console.log('dispose');
								}
							}
						}]]);
					}
				}
			})(VJ,VJ.viewmodel,jQuery,VJ.merge(window.top.config,{
				Middler:{
					'VESH.viewmodel1':{
						pack:'VJ.viewmodel',
						method:'constructor',
						mode:'instance',
						SessionDataManager:{type:'.SessionDataManager',mode:'static',params:[
							{ref:'SessionDataAdapter'}
						]},
						SessionDataAdapter:{type:'.SessionDataAdapter',method:'constructorbean',mode:'static',constructorparalength:1,params:[
							{ref:'CookieDataResource'},
							{params:'Resource','abc':{ref:'CookieDataResource'},'bcd':1},
							{a:1}
						]},
						CookieDataResource:{type:'.CookieDataResource',mode:'static',params:[]}						
					},
					'VESH.view':{
						textbox2:{type:'textbox',params:[]},
						page2:{type:'page2',params:[]},
						panel2:{type:'panel',params:[],path:'hammer.min.js'},
						apanel:{type:'APanel',params:[
							{type:'VJ.middler.getTypeByAppName',params:[{self:true},'VESH.view','panel'],method:'factory',mode:'static'},
							'']},
						bpanel:{type:'BPanel',params:[
							{type:'VJ.middler.getTypeByAppName',params:[{self:true},'VESH.view','panel'],method:'factory',mode:'static'},
							'','',100,false]}						
					}
				}
			}));			
		}		
	</script>	
</head>
<body>
	<form id='frmMain' Action="" _>
		<span id="animationSandbox" style="display: block;" class="bounce animated"><h1 class="site__title mega">Animate.css</h1></span>
		<ruby>汉字<rt>han zi</rt><rp>{}</rp></ruby>
		
		<p><TextBox id="txt" _="key:'输入框:'"></TextBox></p>
		<p><textbox id="txt2" _="key:'输入框2:'"></textbox></p>
		<p><textbox id="txt3" _="key:'输入框:',value:'123'"></textbox></p>
		<p><radiobox id="radio" _="key:'单选框:'"></radiobox></p>
		<p><checkbox id="chk" _="key:'确认框:'"></checkbox></p>
		<p><select id="sel" _="key:'下拉框:'"></select></p>
		<p><hidden id="hid" _="key:'隐藏框:'"></hidden></p>
		<p><passwordbox id="pass" _="key:'密码框:'"></passwordbox></p>
		<p><button id="but" _="key:'按钮'"></button>
		<submit id="sub" _="key:'提交钮4'"></submit>
		<reset _="key:'重置钮'"></reset></p>
		<box  id="box" _="key:'中心'" style="width:200px;height:50px;" class="abc"></box>
		<p><radiolist id="rl" _="name:'aaaa'"></radiolist></p>
		<p><checklist id="cl" _="name:'bbbb'" ></checklist></p>
		<p>
		<!--div id="panel" style="width:200px;height:200px;"_="type:'swiperpanel'"><div>1</div><div>2</div><div>3</div></div-->
		<!--
		<div style="width:400px;height:600px;overflow:hidden;"><div id="panel" style="width:400px;height:600px;background:yellow;"_="type:'rangepanel'">
			<div id="panel2" style="width:300px;height:300px;background:blue;overflow:scroll;" _="type:'rangepanel',visible:false">
				<div style="width:30px;height:50px;background:red;">A<br/>B<br/>C<br/>D</div>
			</div>
		</div></div>-->
		</p>
		<div id='fill' _="type:'fill',direction:'vol'">
			version:{text}<br/>
			ver:{ver}<br/>
			web:{web}
		</div>
		<history id='his' _></history>
		<div id='bp' _="type:'pagepanel',direction:'hor'" style="height:250px;width:300px;">
			<div id='bp2' _="type:'scrollpanel',direction:'vol',bottom:'true',lock:false" style="height:250px;width:300px;">
			<div style="background:red;height:200px;">A1</div><div style="background:blue;height:100px;">B1</div><div style="background:yellow;height:300px;">C1</div>
		</div><div style="background:blue;">B</div><div style="background:yellow;">C</div>
		</div>
		<!--
		<div id='bp2' _="type:'scrollpanel',direction:'vol'" style="height:250px;width:300px;">
			<div style="background:red;height:200px;">A1</div><div style="background:blue;height:100px;">B1</div><div style="background:yellow;height:300px;">C1</div>
		</div>-->
		
		<!--ytsearchbox class="p_searchbox" id="aaa" _></ytsearchbox-->
	</form>	
</body>
</html>
 